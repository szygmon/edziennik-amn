{% extends './base.html.twig' %}

{% block title %}eDziennik AMN - lekcja{% endblock %}

{% block content %}

    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            Szkoła
            <small>Control panel</small>
        </h1>
        <ol class="breadcrumb">
            <li><a href="{{ url('Home/index') }}"><i class="fa fa-dashboard"></i> Home</a></li>
            <li><a href="{{ url('School/index') }}"><i class="fa"></i>Szkoła</a></li>
            <li><a href="{{ url('School/classrooms') }}"><i class="fa"></i>Sale lekcyjne</a></li>
            <li class="active">Dodaj nową</li>
        </ol>
    </section>

    <!-- Main content -->
    <section class="content">
        <div class="nav-tabs-custom">
            <!-- Tabs within a box -->
            <ul class="nav nav-tabs pull-right">
                <li><a href="#ratings-chart" data-toggle="tab">Oceny</a></li>
                <li><a href="#attendance-chart" data-toggle="tab">Frekwencja</a></li>
                <li class="active"><a href="#lesson-chart" data-toggle="tab">Lekcja</a></li>
                <li class="pull-left header"><i class="fa fa-inbox"></i> Dziennik</li>
            </ul>
            <div class="tab-content">
                <!-- Morris chart - Sales -->
                <div class="chart tab-pane active" id="lesson-chart" style="position: relative; min-height: 300px;">

                    <form name="inputform" method="POST" action="{{ url('Lesson/editLesson', {'action': 'add'}) }}">

                        <div class="form-group">
                            <label for="recipient-name" class="control-label">Godzina:</label>
                            <select name="hour" class="form-control" {% if lesson.id %} disabled {% endif %}>
                                {% for i in range(1, 8) %}
                                    <option value="{{ i }}" {% if lesson.hour == i %} selected {% endif %}>{{ i }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="recipient-name" class="control-label">Nauczyciel:</label>
                            <select name="teacher" class="form-control" {% if lesson.id %} disabled {% endif %}>
                                {% for t in Me.getTeacherSidebarData.teachers %}
                                    <option value="{{ t.id }}" {% if t.id == Me.getModel.id %} selected {% endif %}>{{ t.familyName }} {{ t.givenName }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="recipient-name" class="control-label">Klasa:</label>
                            <select name="class" class="form-control" {% if lesson.id %} disabled {% endif %}>
                                {% for c in Me.getTeacherSidebarData.classes %}
                                    <option value="{{ c.id }}" {% if lesson.class.id == c.id %} selected {% endif %} >{{ c.name }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="recipient-name" class="control-label">Przedmiot:</label>
                            <select name="subject" class="form-control" {% if lesson.id %} disabled {% endif %}>
                                {% for s in Me.getTeacherSidebarData.subjects %}
                                    <option value="{{ s.id }}" {% if lesson.subject.id == s.id %} selected {% endif %}>{{ s.subject }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="recipient-name" class="control-label">Temat:</label>
                            <input type="text" name="topic" value="{{ lesson.topic }}" class="form-control" />
                        </div>

                        <div class="box-footer clearfix no-border">
                            <input type="submit" name="save" value="Zapisz" class="btn btn-default pull-right" />

                        </div>

                    </form>


                </div>



                <div class="chart tab-pane" id="attendance-chart" style="position: relative; min-height: 300px;">
                    {% for student in lesson.class.students %}
                        {{ student.givenName }} {{ student.familyName }}<br />
                    {% endfor %}
                </div>



                <div class="chart tab-pane" id="ratings-chart" style="position: relative; min-height: 300px;">
                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Uczeń</th>
                                    {% for i in range(1, 20) %}
                                    <th>{{ ratingd[i].shortDesc }}</th>
                                    {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            {% set nr = 1 %}
                            {% for student in lesson.class.students %}
                                <tr>
                                    <td width="1%">{{ nr }}</td>
                                    <td>{{ student.givenName }} {{ student.familyName }}</td>
                                    {% for i in range(1, 20) %}
                                        <td>
                                            {{ ratings[i][student.id].value }}

                                        </td>
                                    {% endfor %}
                                </tr>
                                {% set nr = nr + 1 %}
                            {% endfor %}

                        </tbody>

                    </table>

                </div>
            </div>
        </div><!-- /.nav-tabs-custom -->

    </section>






{% endblock %}