CREATE SEQUENCE Clas_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE Classroom_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE groups_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE Hour_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE Plan_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE Semester_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE Subject_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE Year_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE TABLE Clas (id INT NOT NULL, year_id INT NOT NULL, name VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_5CC260EB40C1FEA7 ON Clas (year_id);
CREATE TABLE Classroom (id INT NOT NULL, name VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE TABLE groups (id INT NOT NULL, name VARCHAR(255) NOT NULL, mainGroup_id INT DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_F06D39708721F385 ON groups (mainGroup_id);
CREATE TABLE Hour (id INT NOT NULL, fromTime TIME(0) WITHOUT TIME ZONE NOT NULL, toTime TIME(0) WITHOUT TIME ZONE NOT NULL, PRIMARY KEY(id));
CREATE TABLE Plan (id INT NOT NULL, subject_id INT NOT NULL, teacher_id INT NOT NULL, classroom_id INT DEFAULT NULL, class_id INT NOT NULL, group_id INT DEFAULT NULL, hour INT NOT NULL, day INT NOT NULL, fromDate DATE NOT NULL, toDate DATE NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_7D68F44323EDC87 ON Plan (subject_id);
CREATE INDEX IDX_7D68F44341807E1D ON Plan (teacher_id);
CREATE INDEX IDX_7D68F4436278D5A8 ON Plan (classroom_id);
CREATE INDEX IDX_7D68F443EA000B10 ON Plan (class_id);
CREATE INDEX IDX_7D68F443FE54D947 ON Plan (group_id);
CREATE TABLE Semester (id INT NOT NULL, year_id INT NOT NULL, semester INT NOT NULL, fromDate DATE NOT NULL, toDate DATE NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_E4EECBB40C1FEA7 ON Semester (year_id);
CREATE TABLE students_class (student_id INT NOT NULL, clas_id INT NOT NULL, PRIMARY KEY(student_id, clas_id));
CREATE INDEX IDX_E1587E6BCB944F1A ON students_class (student_id);
CREATE INDEX IDX_E1587E6B1CDC0B8A ON students_class (clas_id);
CREATE TABLE Subject (id INT NOT NULL, subject VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE TABLE Teacher (id INT NOT NULL, stopien INT DEFAULT NULL, PRIMARY KEY(id));
CREATE TABLE Year (id INT NOT NULL, fromYear INT NOT NULL, toYear INT NOT NULL, PRIMARY KEY(id));
ALTER TABLE Clas ADD CONSTRAINT FK_5CC260EB40C1FEA7 FOREIGN KEY (year_id) REFERENCES Year (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE groups ADD CONSTRAINT FK_F06D39708721F385 FOREIGN KEY (mainGroup_id) REFERENCES groups (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE Plan ADD CONSTRAINT FK_7D68F44323EDC87 FOREIGN KEY (subject_id) REFERENCES Subject (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE Plan ADD CONSTRAINT FK_7D68F44341807E1D FOREIGN KEY (teacher_id) REFERENCES Teacher (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE Plan ADD CONSTRAINT FK_7D68F4436278D5A8 FOREIGN KEY (classroom_id) REFERENCES Classroom (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE Plan ADD CONSTRAINT FK_7D68F443EA000B10 FOREIGN KEY (class_id) REFERENCES Clas (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE Plan ADD CONSTRAINT FK_7D68F443FE54D947 FOREIGN KEY (group_id) REFERENCES groups (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE Semester ADD CONSTRAINT FK_E4EECBB40C1FEA7 FOREIGN KEY (year_id) REFERENCES Year (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE students_class ADD CONSTRAINT FK_E1587E6BCB944F1A FOREIGN KEY (student_id) REFERENCES Student (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE students_class ADD CONSTRAINT FK_E1587E6B1CDC0B8A FOREIGN KEY (clas_id) REFERENCES Clas (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE Teacher ADD CONSTRAINT FK_7F4B9F49BF396750 FOREIGN KEY (id) REFERENCES users (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE student DROP numberindaily;
